@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Essential Fade-in Animations - Only for navbar and hero */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in-sequential {
  opacity: 0;
  animation: fadeInUp 0.8s ease-out forwards;
}

.fade-in-nav {
  animation-delay: 0.1s;
}

.fade-in-hero {
  animation-delay: 0.3s;
}

/* Mobile optimization - faster animations */
@media (max-width: 768px) {
  .fade-in-sequential {
    animation-duration: 0.6s;
  }
  
  .fade-in-nav { animation-delay: 0.05s; }
  .fade-in-hero { animation-delay: 0.2s; }
}

@media (max-width: 480px) {
  .fade-in-sequential {
    animation-duration: 0.4s;
  }
}

@media (prefers-reduced-motion: reduce) {
  .fade-in-sequential {
    animation: none;
    opacity: 1;
    transform: none;
  }
}

/* TV Static Section Enhancements */
@media (prefers-reduced-motion: reduce) {
  .animate-tv-static-1,
  .animate-tv-static-2,
  .animate-tv-static-3 {
    animation: none !important;
  }
}

/* Enhanced text shadow for better readability over static */
.tv-static-text {
  text-shadow: 
    0 0 10px rgba(0, 0, 0, 0.9),
    0 0 20px rgba(0, 0, 0, 0.8),
    0 0 30px rgba(0, 0, 0, 0.7),
    2px 2px 4px rgba(0, 0, 0, 0.9);
}

/* Subtle glow effect for the text when static is active */
@keyframes subtle-glow {
  0%, 100% { 
    text-shadow: 
      0 0 10px rgba(255, 255, 255, 0.1),
      0 0 20px rgba(255, 255, 255, 0.05),
      0 0 30px rgba(255, 255, 255, 0.02),
      2px 2px 4px rgba(0, 0, 0, 0.9);
  }
  50% { 
    text-shadow: 
      0 0 15px rgba(255, 255, 255, 0.15),
      0 0 25px rgba(255, 255, 255, 0.1),
      0 0 35px rgba(255, 255, 255, 0.05),
      2px 2px 4px rgba(0, 0, 0, 0.9);
  }
}

.tv-static-glow {
  animation: subtle-glow 3s ease-in-out infinite;
}

@media (prefers-reduced-motion: reduce) {
  .tv-static-glow {
    animation: none;
  }
}

/* Simple Gradient Divider - No animation */
.gradient-divider {
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(63, 63, 70, 0.3) 25%,
    rgba(82, 82, 91, 0.6) 50%,
    rgba(63, 63, 70, 0.3) 75%,
    transparent 100%
  );
}

/* Simplified Footer - No complex animations */
.footer-animated {
  font-family: 'IBM Plex Mono', monospace;
  position: relative;
  display: inline-block;
  padding: 25px 35px;
}

/* Enhanced styling for the personal footer message */
.footer-animated span:last-child {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-size: 0.95em;
  letter-spacing: 0.025em;
  transition: color 0.3s ease;
}

/* Simple hover effect for the personal message */
.footer-animated:hover span:last-child {
  color: rgb(214, 211, 209) !important;
}

/* Static decorative borders */
.footer-animated::before {
  content: '⦾ ⦿ ❋ ❊ ✱ ✲ ✳ ✴ ◆ ◇ ○ ● ◦ ◉ ✦ ✧ ※ ⋆ ★ ☆';
  position: absolute;
  top: -8px;
  left: 0;
  right: 0;
  height: 15px;
  text-align: center;
  font-size: 10px;
  line-height: 12px;
  letter-spacing: 3px;
  color: rgba(168, 162, 158, 0.4);
  pointer-events: none;
  overflow: hidden;
  white-space: nowrap;
}

.footer-animated::after {
  content: '⦿ ⦾ ❊ ❋ ✴ ✳ ✲ ✱ ◆ ◇ ○ ● ◦ ◉ ✦ ✧ ※ ⋆ ★ ☆';
  position: absolute;
  bottom: -8px;
  left: 0;
  right: 0;
  height: 15px;
  text-align: center;
  font-size: 10px;
  line-height: 12px;
  letter-spacing: 3px;
  color: rgba(168, 162, 158, 0.4);
  pointer-events: none;
  overflow: hidden;
  white-space: nowrap;
}


/* Booking Popover Smooth Animations */
@keyframes popover-backdrop-enter {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes popover-backdrop-exit {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

@keyframes popover-content-enter {
  from {
    opacity: 0;
    transform: scale3d(0.9, 0.9, 1) translate3d(0, -10px, 0);
  }
  to {
    opacity: 1;
    transform: scale3d(1, 1, 1) translate3d(0, 0, 0);
  }
}

@keyframes popover-content-exit {
  from {
    opacity: 1;
    transform: scale3d(1, 1, 1) translate3d(0, 0, 0);
  }
  to {
    opacity: 0;
    transform: scale3d(0.95, 0.95, 1) translate3d(0, -5px, 0);
  }
}

/* Animation classes for the popover backdrop */
.popover-backdrop-enter {
  animation: popover-backdrop-enter 300ms ease-out forwards;
  will-change: opacity;
}

.popover-backdrop-exit {
  animation: popover-backdrop-exit 250ms ease-in forwards;
  will-change: opacity;
}

/* Animation classes for the popover content */
.popover-content-enter {
  animation: popover-content-enter 300ms ease-out forwards;
  will-change: opacity, transform;
}

.popover-content-exit {
  animation: popover-content-exit 250ms ease-in forwards;
  will-change: opacity, transform;
}

/* Respect user's motion preferences for popover */
@media (prefers-reduced-motion: reduce) {
  .popover-backdrop-enter,
  .popover-backdrop-exit,
  .popover-content-enter,
  .popover-content-exit {
    animation: none !important;
    opacity: 1;
    transform: none;
  }
}

/* Mobile Performance Optimizations */
@media (max-width: 768px) {
  /* Reduce transform complexity on mobile */
  .hover\:scale-105:hover {
    transform: scale(1.02);
  }
  
  /* Simplify shadows on mobile for better performance */
  .shadow-2xl {
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
  
  .shadow-lg {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }
  
  /* Optimize backdrop blur for mobile */
  .backdrop-blur-sm {
    backdrop-filter: blur(2px);
    -webkit-backdrop-filter: blur(2px);
  }
}

/* Battery-saving animations on very small screens */
@media (max-width: 480px), (max-height: 600px) {
  /* Disable complex animations on small screens */
  .animate-pulse {
    animation: none;
    opacity: 0.75;
  }
  
  /* Reduce TV static intensity */
  .animate-tv-static-1,
  .animate-tv-static-2,
  .animate-tv-static-3 {
    animation-duration: 0.3s !important;
  }
  
  /* Simplify gradient animations */
  .gradient-divider {
    animation-duration: 6s !important;
  }
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
  /* Remove hover effects on touch devices */
  .hover\:scale-105:hover {
    transform: none;
  }
  
  .hover\:shadow-lg:hover {
    box-shadow: inherit;
  }
  
  /* Focus on tap feedback instead */
  .active\:scale-95:active {
    transform: scale(0.98);
  }
}

/* High DPI screen optimizations */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  /* Use transform instead of box-shadow for better performance on retina */
  .shadow-lg {
    box-shadow: none;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }
}

/* Chart and visualization mobile fixes */
@media (max-width: 768px) {
  /* Ensure all charts are contained within viewport */
  svg {
    max-width: 100% !important;
    height: auto !important;
  }
  
  /* Fix ViSX chart overflow issues */
  [class*="visx"] {
    max-width: 100vw !important;
    overflow: visible !important;
  }
  
  /* Responsive chart legends */
  .chart-legend {
    flex-direction: column !important;
    align-items: center !important;
    gap: 0.5rem !important;
  }
}

/* Emergency mobile containment for charts */
@media (max-width: 480px) {
  /* Force all SVG elements to respect viewport */
  svg {
    max-width: 95vw !important;
  }
  
  /* Reduce chart complexity on very small screens */
  .chart-complex-elements {
    display: none !important;
  }
  
  /* Hide chart grid lines on mobile for cleaner look */
  .mobile-hide {
    display: none !important;
  }
  
  /* Simplify gradients on mobile for better performance */
  [id*="gradient-"] {
    opacity: 0.7 !important;
  }
}

/* Mobile Navigation Touch Target Utilities */
.min-h-touch {
  min-height: 44px;
}

.min-w-touch {
  min-width: 44px;
}

.touch-manipulation {
  touch-action: manipulation;
}

/* FIXED: Enhanced navbar-specific mobile optimizations */
@media (max-width: 1023px) {
  .navbar-mobile-optimized nav {
    backdrop-filter: blur(8px) !important;
    -webkit-backdrop-filter: blur(8px) !important;
  }
  
  /* FIXED: Prevent mobile menu from creating horizontal scrollbars with better safe area handling */
  .mobile-menu-panel {
    max-width: calc(85vw - env(safe-area-inset-right, 0px)) !important;
    right: env(safe-area-inset-right, 0px);
    /* FIXED: Ensure proper z-index stacking */
    z-index: 1101 !important;
    will-change: transform;
    contain: layout style;
  }
  
  /* FIXED: Optimize mobile scrolling performance with better overflow handling */
  .mobile-scroll-optimized {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE/Edge */
  }
  
  .mobile-scroll-optimized::-webkit-scrollbar {
    display: none; /* Webkit browsers */
  }
}

/* FIXED: Better safe area utilities for mobile devices */
.pt-safe-top {
  padding-top: max(env(safe-area-inset-top, 0px), 0px);
}

.pb-safe-bottom {
  padding-bottom: max(env(safe-area-inset-bottom, 0px), 0px);
}

.pl-safe-left {
  padding-left: max(env(safe-area-inset-left, 0px), 0px);
}

.pr-safe-right {
  padding-right: max(env(safe-area-inset-right, 0px), 0px);
}

/* FIXED: Enhanced scrollbar hiding */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* FIXED: Prevent horizontal scrolling issues with better containment */
.prevent-horizontal-scroll {
  overflow-x: hidden !important;
  max-width: 100vw !important;
  contain: layout;
}

/* FIXED: Layout stability for animations with better GPU utilization */
.layout-stable {
  contain: layout style paint;
  will-change: auto;
  transform: translateZ(0); /* Force GPU acceleration when needed */
}

/* FIXED: Mobile navigation optimizations aligned with new breakpoints */
@media (max-width: 639px) { /* Align with new mobile breakpoint (< 640px) */
  /* Reduce animation complexity on smaller screens */
  .navbar-mobile-optimized {
    transition: opacity 150ms ease-out, transform 150ms ease-out;
    will-change: opacity, transform;
  }
  
  /* Prevent zoom on mobile inputs */
  input, textarea, select {
    font-size: 16px !important;
  }
  
  /* FIXED: Better mobile menu backdrop handling */
  .mobile-menu-backdrop {
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    /* Better iOS support */
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }
}

/* FIXED: Tablet-specific optimizations for the 640px-1024px range */
@media (min-width: 640px) and (max-width: 1023px) {
  .navbar-mobile-optimized {
    /* Enhanced backdrop blur for tablets */
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
  
  .mobile-menu-panel {
    /* Better width handling for tablets */
    max-width: min(400px, 80vw);
  }
}

/* FIXED: Z-index management layer for proper stacking */
.z-navbar {
  z-index: 1050;
}

.z-mobile-menu {
  z-index: 1100;
}

.z-mobile-menu-panel {
  z-index: 1101;
}

.z-mobile-menu-content {
  z-index: 1102;
}